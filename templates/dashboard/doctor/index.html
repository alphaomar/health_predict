{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>SewaBai Doctor Dashboard</title>
    <meta
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
      name="viewport"
    />
    <link
      rel="icon"
      href="{% static 'dashboard/img/kaiadmin/favicon.ico' %}"
      type="image/x-icon"
    />

    <!-- Fonts and icons -->
    <script src="{% static 'dashboard/js/plugin/webfont/webfont.min.js' %}"></script>
    <script>
      WebFont.load({
        google: { families: ["Public Sans:300,400,500,600,700"] },
        custom: {
          families: [
            "Font Awesome 5 Solid",
            "Font Awesome 5 Regular",
            "Font Awesome 5 Brands",
            "simple-line-icons",
          ],
          urls: ["{% static 'dashboard/css/fonts.min.css' %}"],
        },
        active: function () {
          sessionStorage.fonts = true;
        },
      });
    </script>

    <!-- CSS Files -->
    <link rel="stylesheet" href="{% static 'dashboard/css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'dashboard/css/plugins.min.css' %}" />
    <link rel="stylesheet" href="{% static 'dashboard/css/kaiadmin.min.css' %}" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOMqRFZZ+UJumwkVVltmSJ+6An6Eqp5tj3gr5CVj" crossorigin="anonymous">


    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link rel="stylesheet" href="{% static 'dashboard/css/demo.css' %}" />
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

      <style>
          /* Style for profile image */
.profile-image {
  border-radius: 50%; /* This makes the image round */
  height: 80px;       /* Controls the height */
  width: 80px;        /* Ensures the image remains a square */
  object-fit: cover;  /* Ensures the image scales properly within the round frame */
  border: 2px solid #fff; /* Optional: Adds a white border for a cleaner look */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Optional: Adds a slight shadow for a 3D effect */
}

      </style>
  </head>
  <body>

    <div class="wrapper">

      <!-- Sidebar -->
<div class="sidebar" data-background-color="dark">
  <div class="sidebar-logo">
    <!-- Logo Header -->
    <div class="logo-header" data-background-color="dark">
      <a href="index.html" class="logo">

       <img
  src="{{ user.doctorprofile.profile_picture.url }}"
  alt="Profile Image"
  class="navbar-brand profile-image"

/>
      </a>
      <div class="nav-toggle">
        <button class="btn btn-toggle toggle-sidebar">
          <i class="gg-menu-right"></i>
        </button>
        <button class="btn btn-toggle sidenav-toggler">
          <i class="gg-menu-left"></i>
        </button>
      </div>
      <button class="topbar-toggler more">
        <i class="gg-more-vertical-alt"></i>
      </button>
    </div>
    <!-- End Logo Header -->
  </div>
  <div class="sidebar-wrapper scrollbar scrollbar-inner">
    <div class="sidebar-content">
      <ul class="nav nav-secondary">
        <li class="nav-item active">
          <a href="{% url 'doctor:doctor_report' %}" class="collapsed" aria-expanded="false">
            <i class="fas fa-tachometer-alt"></i>
            <p>Dashboard</p>
          </a>
        </li>
        <li class="nav-section">
          <h4 class="text-section">Main Menu</h4>
        </li>
        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#patients">
            <i class="fas fa-bullhorn"></i>
            <p>Patient Management</p>
            <span class="caret"></span>
          </a>
          <div class="collapse" id="patients">
            <ul class="nav nav-collapse">
              <li>
                <a href="{% url 'doctor:patient_list' %}">
                  <span class="sub-item">All Patient</span>
                </a>
              </li>
              <li>
                <a href="{% url 'doctor:medical_records' %}">
                  <span class="sub-item">Medical Records</span>
                </a>
              </li>

            </ul>
          </div>
        </li>
        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#consult">
            <i class="fas fa-hand-holding-usd"></i>
            <p>Appointment Management </p>
            <span class="caret"></span>
          </a>
          <div class="collapse" id="consult">
            <ul class="nav nav-collapse">
              <li>
               <a href="{% url 'doctor:doctor_appointments' %}">
                  <span class="sub-item"> All Appointments </span>
                </a>
              </li>
              <li>
                <a href="{% url 'doctor:pending_appointments' %}">
                  <span class="sub-item">Pending Appoinments</span>
                </a>
              </li>
                <li>
                <a href="{% url 'doctor:completed_appointments' %}">
                  <span class="sub-item">Completed Appointments</span>
                </a>
              </li>
                <li>
                <a href="{% url 'doctor:cancelled_appointments' %}">
                  <span class="sub-item">Cancelled Appointments</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#prescriptions">
            <i class="fas fa-heart"></i>
            <p>Prescriptions</p>
            <span class="caret"></span>
          </a>
          <div class="collapse" id="prescriptions">
            <ul class="nav nav-collapse">
              <li>
                <a href="{% url 'doctor:doctor-prescriptions' %}">
                  <span class="sub-item">All</span>
                </a>
              </li>

            </ul>
          </div>
        </li>

          <li class="nav-item">
          <a data-bs-toggle="collapse" href="#consultations">

            <i class="fas fa-heart"></i>
            <p>Consultations</p>
            <span class="caret"></span>
          </a>
          <div class="collapse" id="consultations">
            <ul class="nav nav-collapse">
              <li>
                <a href="{% url 'doctor:consultation_index' %}">
                  <span class="sub-item">All Consultations</span>
                </a>
              </li>

            </ul>
          </div>
        </li>



        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#settings">
            <i class="fas fa-chart-bar"></i>
            <p>Settings</p>
            <span class="caret"></span>
          </a>
          <div class="collapse" id="settings">
            <ul class="nav nav-collapse">
              <li>
                <a href="{% url 'doctor:availability' %}">
                  <span class="sub-item">Availability</span>
                </a>
              </li>
              <li>
                <a href="#">
                  <span class="sub-item">Reviews</span>
                </a>
              </li>
            </ul>
          </div>
        </li>

      </ul>
    </div>
  </div>
</div>
<!-- End Sidebar -->



        <div class="main-panel">
    <div class="main-header">
        <div class="main-header-logo">
            <!-- Logo Header -->
            <div class="logo-header" data-background-color="dark">
    <a href="#" class="logo">
        <img
            src="{{ user.doctorprofile.profile_picture.url }}"
            alt="navbar brand"
            class="profile-image" <!-- Use the profile-image class -->
        />
    </a>
    <div class="nav-toggle">
        <button class="btn btn-toggle toggle-sidebar">
            <i class="gg-menu-right"></i>
        </button>
        <button class="btn btn-toggle sidenav-toggler">
            <i class="gg-menu-left"></i>
        </button>
    </div>
    <button class="topbar-toggler more">
        <i class="gg-more-vertical-alt"></i>
    </button>
</div>
d Logo Header -->
        </div>
        <!-- Navbar Header -->
        <nav class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom">
            <div class="container-fluid">
                <nav class="navbar navbar-header-left navbar-expand-lg navbar-form nav-search p-0 d-none d-lg-flex">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <button type="submit" class="btn btn-search pe-1">
                                <i class="fa fa-search search-icon"></i>
                            </button>
                        </div>
                        <input
                            type="text"
                            placeholder="Search ..."
                            class="form-control"
                        />
                    </div>
                </nav>

                <ul class="navbar-nav topbar-nav ms-md-auto align-items-center">
                    <!-- Search Dropdown -->
                    <li class="nav-item topbar-icon dropdown hidden-caret d-flex d-lg-none">
                        <a
                            class="nav-link dropdown-toggle"
                            data-bs-toggle="dropdown"
                            href="#"
                            role="button"
                            aria-expanded="false"
                            aria-haspopup="true"
                        >
                            <i class="fa fa-search"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-search animated fadeIn">
                            <form class="navbar-left navbar-form nav-search">
                                <div class="input-group">
                                    <input
                                        type="text"
                                        placeholder="Search ..."
                                        class="form-control"
                                    />
                                </div>
                            </form>
                        </ul>
                    </li>

                    <!-- Messages Dropdown -->
                    <li class="nav-item topbar-icon dropdown hidden-caret">
                        <a
                            class="nav-link dropdown-toggle"
                            href="#"
                            id="messageDropdown"
                            role="button"
                            data-bs-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false"
                        >
                            <i class="fa fa-envelope"></i>
                        </a>
                        <ul class="dropdown-menu messages-notif-box animated fadeIn" aria-labelledby="messageDropdown">
                            <li>
                                <div class="dropdown-title d-flex justify-content-between align-items-center">
                                    Messages
                                    <a href="#" class="small">Mark all as read</a>
                                </div>
                            </li>
                            <li>
                                <div class="message-notif-scroll scrollbar-outer">
                                    <div class="notif-center">
                                        <a href="#">
                                            <div class="notif-img">
                                                <img
                                                    src="{% static 'dashboard/img/kaiadmin/icon.png' %}"
                                                    alt="Img Profile"
                                                />
                                            </div>
                                            <div class="notif-content">
                                                <span class="subject">Jimmy Denis</span>
                                                <span class="block"> How are you? </span>
                                                <span class="time">5 minutes ago</span>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a class="see-all" href="javascript:void(0);">
                                    See all messages<i class="fa fa-angle-right"></i>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- Notifications Dropdown -->
                    <li class="nav-item topbar-icon dropdown hidden-caret">
                        <a
                            class="nav-link dropdown-toggle"
                            href="#"
                            id="notifDropdown"
                            role="button"
                            data-bs-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false"
                        >
                            <i class="fa fa-bell"></i>
                            <span class="notification">4</span>
                        </a>
                        <ul class="dropdown-menu notif-box animated fadeIn" aria-labelledby="notifDropdown">
                            <li>
                                <div class="dropdown-title">
                                    You have 4 new notifications
                                </div>
                            </li>
                            <li>
                                <div class="notif-scroll scrollbar-outer">
                                    <div class="notif-center">
                                        <a href="#">
                                            <div class="notif-icon notif-primary">
                                                <i class="fa fa-user-plus"></i>
                                            </div>
                                            <div class="notif-content">
                                                <span class="block"> New user registered </span>
                                                <span class="time">5 minutes ago</span>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a class="see-all" href="javascript:void(0);">
                                    See all notifications<i class="fa fa-angle-right"></i>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <!-- Quick Actions Dropdown -->
                    <li class="nav-item topbar-icon dropdown hidden-caret">
                        <a
                            class="nav-link"
                            data-bs-toggle="dropdown"
                            href="#"
                            aria-expanded="false"
                        >
                            <i class="fas fa-layer-group"></i>
                        </a>
                        <div class="dropdown-menu quick-actions animated fadeIn">
                            <div class="quick-actions-header">
                                <span class="title mb-1">Quick Actions</span>
                                <span class="subtitle op-7">Shortcuts</span>
                            </div>
                           <div class="quick-actions-scroll scrollbar-outer">
    <div class="quick-actions-items">
        <div class="row m-0">
            <!-- Dashboard Overview -->
            <a class="col-6 col-md-4 p-0" href="#">
                <div class="quick-actions-item">
                    <div class="avatar-item bg-primary rounded-circle">
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                    <span class="text">Dashboard</span>
                </div>
            </a>

            <!-- Campaign Management -->
            <a class="col-6 col-md-4 p-0" href="#">
                <div class="quick-actions-item">
                    <div class="avatar-item bg-warning rounded-circle">
                        <i class="fas fa-campaign"></i>
                    </div>
                    <span class="text">Chat with Patients </span>
                </div>
            </a>

            <!-- Reports -->
            <a class="col-6 col-md-4 p-0" href="#">
                <div class="quick-actions-item">
                    <div class="avatar-item bg-info rounded-circle">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <span class="text">Reports</span>
                </div>
            </a>

            <!-- Donations -->
            <a class="col-6 col-md-4 p-0" href="#">
                <div class="quick-actions-item">
                    <div class="avatar-item bg-success rounded-circle">
                        <i class="fas fa-donate"></i>
                    </div>
                    <span class="text">Donations</span>
                </div>
            </a>

            <!-- Messages -->
            <a class="col-6 col-md-4 p-0" href="#">
                <div class="quick-actions-item">
                    <div class="avatar-item bg-danger rounded-circle">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <span class="text">Messages</span>
                </div>
            </a>

            <!-- Settings -->
            <a class="col-6 col-md-4 p-0" href="#">
                <div class="quick-actions-item">
                    <div class="avatar-item bg-secondary rounded-circle">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <span class="text">Settings</span>
                </div>
            </a>
        </div>
    </div>
</div>

                        </div>
                    </li>

                    <!-- User Profile Dropdown -->
                    <li class="nav-item topbar-user dropdown hidden-caret">
                        <a
                            class="dropdown-toggle profile-pic"
                            data-bs-toggle="dropdown"
                            href="#"
                            aria-expanded="false"
                        >
                            <div class="avatar-sm">
                                <img
                                    src="{{ user.profile_image.url }}"
                                    alt="..."
                                    class="avatar-img rounded-circle"
                                />
                            </div>
                            <span class="profile-username">
                                <span class="op-7">Hi,</span>
                                <span class="fw-bold">{{ user.username }}</span>
                            </span>
                        </a>
                        <ul class="dropdown-menu dropdown-user animated fadeIn">
                            <div class="dropdown-user-scroll scrollbar-outer">
                                <li>
                                    <div class="user-box">
                                        <div class="avatar-lg">
                                            <img
                                                src="{{ user.profile_image.url }}"
                                                alt="..."
                                                class="avatar-img rounded-circle"
                                            />
                                        </div>
                                        <div class="u-text">
                                            <h4>{{ user.username }}</h4>
                                            <p class="text-muted">{{ user.first_name }} {{ user.last_name }}</p>

                                             {% if request.user.doctorprofile %}
    <a href="{% url 'dashboard:doctor-detail' request.user.doctorprofile.pk %}" class="btn btn-xs btn-secondary btn-sm">View Profile</a>
{% else %}
    <p>No doctor profile available.</p>
{% endif %}
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="{% url 'dashboard:doctor-detail' request.user.pk %}">Profile</a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#">Settings</a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="{% url 'accounts:logout' %}">Logout</a>
                                </li>
                            </div>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- End Navbar Header -->
    </div>




        <div class="container">
            <div
              class="d-flex align-items-left align-items-md-center flex-column flex-md-row pt-2 pb-4"
            >
              <div>
                <h3 class="fw-bold mb-3">Doctor's Dashboard</h3>
                <h6 class="op-7 mb-2"></h6>
              </div>
              <div class="ms-md-auto py-2 py-md-0">
    <a href="{% url 'communication:doctor_room' %}" class="btn btn-primary">
        <i class="fas fa-comments"></i> Join Chat
    </a>
</div>
            </div>
          <div class="page-inner">

          {% block content %}

<div class="row">
    <!-- Total Appointments -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-primary bubble-shadow-small">
                            <i class="fas fa-flag"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Total Appointments</p>
                            <h4 class="card-title"> {{ total_appointments }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pending Appointments -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-info bubble-shadow-small">
                            <i class="fas fa-donate"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Pending Appointments</p>
                            <h4 class="card-title">{{ pending_appointments }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Completed Appointments -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-success bubble-shadow-small">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Completed Appointments</p>
                            <h4 class="card-title">{{ completed_appointments }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cancelled Appointments -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-secondary bubble-shadow-small">
                            <i class="fas fa-times-circle"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Cancelled Appointments</p>
                            <h4 class="card-title">{{ cancelled_appointments }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Online Appointments -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-warning bubble-shadow-small">
                            <i class="fas fa-laptop-medical"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Online Appointments</p>
                            <h4 class="card-title">{{ online_appointments }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- In-person Appointments -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-danger bubble-shadow-small">
                            <i class="fas fa-hospital"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">In-person Appointments</p>
                            <h4 class="card-title">{{ in_person_appointments }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Total Fees Collected -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-success bubble-shadow-small">
                            <i class="fas fa-coins"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Total Fees Collected</p>
                            <h4 class="card-title">{{ total_fees_collected }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Average Fee Per Appointment -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-info bubble-shadow-small">
                            <i class="fas fa-calculator"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Average Fee Per Appointment</p>
                            <h4 class="card-title">{{ average_fee }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Reviews Section -->
<div class="row">
    <!-- Total Reviews -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-primary bubble-shadow-small">
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Total Reviews</p>
                            <h4 class="card-title">{{ total_reviews }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Average Rating -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-warning bubble-shadow-small">
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">Average Rating</p>
                            <h4 class="card-title">{{ average_rating }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 5-star Reviews -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-success bubble-shadow-small">
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">5-star Reviews</p>
                            <h4 class="card-title">{{ five_star_reviews }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 1-star Reviews -->
    <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-danger bubble-shadow-small">
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                            <p class="card-category">1-star Reviews</p>
                            <h4 class="card-title">{{ one_star_reviews }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


              <div class="col-md-12">
  <div class="card">
    <div class="card-header">
      <h4 class="card-title">Campaign Details</h4>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table
                id="campaign-details"
                class="display table table-striped table-hover"
        >
          <thead>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Goal Amount</th>
            <th>Amount Raised</th>
            <th>Start Date</th>
            <th>End Date</th>
          </tr>
          </thead>
          <tfoot>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Goal Amount</th>
            <th>Amount Raised</th>
            <th>Start Date</th>
            <th>End Date</th>
          </tr>
          </tfoot>
          <tbody>
          {% for campaign in campaigns %}
            <tr>
              <td>89</td>
              <td>34</td>
              <td>${{ campaign.goal_amount }}</td>
              <td>${{ campaign.get_total_raised }}</td>
              <td>{{ campaign.start_date|date:"Y-m-d" }}</td>
              <td>{{ campaign.end_date|date:"Y-m-d" }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="6">No campaigns found.</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


            <div class="row">
              <div class="col-md-8">
{#                <div class="card card-round">#}
                    <div class="card">
    <div class="card-body">
        <div class="card-head-row card-tools-still-right">
            <h4 class="card-title">Number of Donations by Campaign</h4>
            <div class="card-tools">
                <button class="btn btn-icon btn-link btn-primary btn-xs">
                    <span class="fa fa-angle-down"></span>
                </button>
                <button class="btn btn-icon btn-link btn-primary btn-xs btn-refresh-card">
                    <span class="fa fa-sync-alt"></span>
                </button>
                <button class="btn btn-icon btn-link btn-primary btn-xs">
                    <span class="fa fa-times"></span>
                </button>
            </div>
        </div>
        <div class="chart-container" style="position: relative; height:40vh; width:80vw">
            <canvas id="donationsBarChart"></canvas>
        </div>
    </div>
</div>

                </div>
{#              </div>#}
              <div class="col-md-4">
                <div class="card card-primary card-round">
                  <div class="card-header">
                    <div class="card-head-row">
                      <div class="card-title">Today's  Donations</div>
                      <div class="card-tools">
                        <div class="dropdown">
                          <button
                            class="btn btn-sm btn-label-light dropdown-toggle"
                            type="button"
                            id="dropdownMenuButton"
                            data-bs-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false"
                          >
                            Export
                          </button>
                          <div
                            class="dropdown-menu"
                            aria-labelledby="dropdownMenuButton"
                          >
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <a class="dropdown-item" href="#"
                              >Something else here</a
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card-category">{{ today }}</div>
                  </div>
                  <div class="card-body pb-0">
                    <div class="mb-4 mt-2">
                      <h1>${{ today_donations_amount }} </h1>

                    </div>
                    <div class="pull-in">
                      <canvas id="dailySalesChart"></canvas>
                    </div>
                  </div>
                </div>
                <div class="card card-round">

</div>

              </div>
            </div>
{#           #}
            <div class="row">
    <div class="col-md-12">
        <div class="card card-round">
            <div class="card-body">
                <h4 class="card-title">Donor Information</h4>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Donor Name</th>
                                <th scope="col">Email Address</th>
                                <th scope="col">Donation Amount</th>
                                <th scope="col">Campaign</th>
                                <th scope="col">Status</th>
                                <th scope="col">Date</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for campaign in campaigns %}
                            {% for donation in campaign.donations.all %}
                            <tr>
                                <td>{{ donation.donor_name|default:"Anonymous" }}</td>
                                <td>{{ donation.donor_email|default:"N/A" }}</td>
                                <td>${{ donation.amount }}</td>
                                <td>{{ campaign.title }}</td>
                                <td>
                                    {% if donation.status == 'COMPLETED' %}
                                    <span class="badge bg-success">Completed</span>
                                    {% elif donation.status == 'PENDING' %}
                                    <span class="badge bg-warning text-dark">Pending</span>
                                    {% else %}
                                    <span class="badge bg-danger">Failed</span>
                                    {% endif %}
                                </td>
                                <td>{{ donation.created_at|date:"M d, Y" }}</td>
                                <td>
                                    {% if donation.donor_email %}
                                    <a href="mailto:{{ donation.donor_email }}" class="btn btn-sm btn-primary">
                                        <i class="fas fa-envelope"></i> Email
                                    </a>
                                    {% else %}
                                    <button class="btn btn-sm btn-secondary" disabled>
                                        <i class="fas fa-envelope"></i> No Email
                                    </button>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                            {% empty %}
                            <tr>
                                <td colspan="7" class="text-center text-muted">No donations available.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
 {% endblock %}


        <footer class="dashboard-footer">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <!-- Copyright and Branding -->
    <div class="copyright">
      &copy; <script>document.write(new Date().getFullYear());</script> Sulcon Opportunity +. All rights reserved.
    </div>
    <!-- Quick Links -->
    <nav>
      <ul class="nav">
        <li class="nav-item">
          <a class="nav-link" href="#">Help</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Privacy Policy</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Contact Us</a>
        </li>
      </ul>
    </nav>
  </div>
</footer>


      <!-- Custom template | don't include it in your project! -->
      <div class="custom-template">
        <div class="title">Settings</div>
        <div class="custom-content">
          <div class="switcher">
            <div class="switch-block">
              <h4>Logo Header</h4>
              <div class="btnSwitch">
                <button
                  type="button"
                  class="selected changeLogoHeaderColor"
                  data-color="dark"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="blue"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="purple"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="light-blue"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="green"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="orange"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="red"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="white"
                ></button>
                <br />
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="dark2"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="blue2"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="purple2"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="light-blue2"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="green2"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="orange2"
                ></button>
                <button
                  type="button"
                  class="changeLogoHeaderColor"
                  data-color="red2"
                ></button>
              </div>
            </div>
            <div class="switch-block">
              <h4>Navbar Header</h4>
              <div class="btnSwitch">
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="dark"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="blue"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="purple"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="light-blue"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="green"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="orange"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="red"
                ></button>
                <button
                  type="button"
                  class="selected changeTopBarColor"
                  data-color="white"
                ></button>
                <br />
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="dark2"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="blue2"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="purple2"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="light-blue2"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="green2"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="orange2"
                ></button>
                <button
                  type="button"
                  class="changeTopBarColor"
                  data-color="red2"
                ></button>
              </div>
            </div>
            <div class="switch-block">
              <h4>Sidebar</h4>
              <div class="btnSwitch">
                <button
                  type="button"
                  class="changeSideBarColor"
                  data-color="white"
                ></button>
                <button
                  type="button"
                  class="selected changeSideBarColor"
                  data-color="dark"
                ></button>
                <button
                  type="button"
                  class="changeSideBarColor"
                  data-color="dark2"
                ></button>
              </div>
            </div>
          </div>
        </div>
        <div class="custom-toggle">
          <i class="icon-settings"></i>
        </div>
      </div>
      <!-- End Custom template -->
    </div>
    <!--   Core JS Files   -->
    <script src="{% static 'dashboard/js/core/jquery-3.7.1.min.js' %}"></script>
    <script src="{% static 'dashboard/js/core/popper.min.js' %}"></script>
    <script src="{% static 'dashboard/js/core/bootstrap.min.js' %}"></script>

    <!-- jQuery Scrollbar -->
    <script src="{% static 'dashboard/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js' %}"></script>

    <!-- Chart JS -->
    <script src="{% static 'dashboard/js/plugin/chart.js/chart.min.js' %}"></script>

    <!-- jQuery Sparkline -->
    <script src="{% static 'dashboard/js/plugin/jquery.sparkline/jquery.sparkline.min.js' %}"></script>

    <!-- Chart Circle -->
    <script src="{% static 'dashboard/js/plugin/chart-circle/circles.min.js' %}"></script>

    <!-- Datatables -->
    <script src="{% static 'dashboard/js/plugin/datatables/datatables.min.js' %}"></script>

    <!-- Bootstrap Notify -->
    <script src="{% static 'dashboard/js/plugin/bootstrap-notify/bootstrap-notify.min.js' %}"></script>

    <!-- jQuery Vector Maps -->
    <script src="{% static 'dashboard/js/plugin/jsvectormap/jsvectormap.min.js' %}"></script>
    <script src="{% static 'dashboard/js/plugin/jsvectormap/world.js' %}"></script>

    <!-- Sweet Alert -->
    <script src="{% static 'dashboard/js/plugin/sweetalert/sweetalert.min.js' %}assets/"></script>

    <!-- Kaiadmin JS -->
    <script src="{% static 'dashboard/js/kaiadmin.min.js' %}"></script>
    <link href="{% static 'tinymce/css/prism.css' %}" rel="stylesheet">
           {% block extra_script %}

            {% endblock extra_script %}

    {% block style %}


<style>

    .card-stats {
        border: 1px solid #ddd;
        border-radius: 0.5rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        background: #fff;
        transition: box-shadow 0.3s ease;
    }

    .card-stats:hover {
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .card-body {
        padding: 1.5rem;
    }

    .col-icon {
        flex: 0 0 auto;
    }

    .icon-big {
        font-size: 2rem;
        width: 3rem;
        height: 3rem;
        line-height: 3rem;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.1);
        color: #007bff;
    }

    .icon-primary { color: #007bff; }
    .icon-info { color: #17a2b8; }
    .icon-success { color: #28a745; }
    .icon-secondary { color: #dc3545; }

    .bubble-shadow-small {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .col-stats {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .numbers {
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 100%;
    }

    .card-category {
        font-size: 0.875rem;
        color: #6c757d;
        margin: 0;
    }

    .card-title {
        font-size: 1.5rem;
        margin: 0;
        color: #333;
    }

    @media (max-width: 768px) {
        .card-title {
            font-size: 1.25rem;
        }
    }

  /* Card Container */
  .card {
    border: none;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden;
    background: linear-gradient(135deg, #f8f9fa, #ffffff);
  }

  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
  }

  /* Card Header */
  .card-header {
    background-color: #007bff;
    color: #ffffff;
    padding: 15px;
    border-bottom: none;
    text-align: center;
  }

  .card-title {
    font-size: 1.5rem;
    margin: 0;
    font-weight: bold;
  }

  /* Table */
  .table-responsive {
    padding: 15px;
  }

  .table {
    border-collapse: separate;
    border-spacing: 0;
    width: 100%;
    margin-bottom: 1rem;
    background-color: transparent;
  }

  .table th, .table td {
    padding: 1rem;
    vertical-align: middle;
    border-top: none;
    border-bottom: 1px solid #dee2e6;
    transition: background-color 0.3s ease;
  }

  .table thead th {
    background-color: #007bff;
    color: #ffffff;
    border: none;
    font-weight: bold;
  }

  .table tfoot th {
    background-color: #f8f9fa;
    color: #6c757d;
    border: none;
    font-weight: bold;
  }

  .table tbody tr {
    background-color: #ffffff;
    border-bottom: 1px solid #dee2e6;
    transition: background-color 0.3s ease, transform 0.3s ease;
  }

  .table tbody tr:hover {
    background-color: #f1f1f1;
    transform: translateX(10px);
  }

  .table tbody tr:last-child td {
    border-bottom: none;
  }

  /* Empty State */
  .table tbody tr td[colspan="6"] {
    text-align: center;
    color: #6c757d;
    font-style: italic;
  }

  /* Responsive Adjustments */
  @media (max-width: 768px) {
    .table th, .table td {
      padding: 0.75rem;
    }

    .card-title {
      font-size: 1.25rem;
    }
  }

  @media (max-width: 576px) {
    .table th, .table td {
      padding: 0.5rem;
    }

    .card-title {
      font-size: 1rem;
    }
  }
    /* Dashboard Header Container */
  .d-flex {
    background-color: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    transition: box-shadow 0.3s ease;
  }

  .d-flex:hover {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  }

  /* Heading Styling */
  .fw-bold {
    font-size: 1.8rem;
    color: #343a40;
  }

  .op-7 {
    font-size: 1rem;
    color: #6c757d;
    font-weight: 400;
  }

  /* Buttons */
  .btn-round {
    border-radius: 30px;
    padding: 10px 20px;
    font-size: 1rem;
    font-weight: 600;
    transition: background-color 0.3s ease, transform 0.2s ease;
  }

  .btn-label-info {
    background-color: #17a2b8;
    color: #ffffff;
    border: none;
  }

  .btn-label-info:hover {
    background-color: #138496;
    transform: translateY(-3px);
  }

  .btn-primary {
    background-color: #007bff;
    color: #ffffff;
    border: none;
  }

  .btn-primary:hover {
    background-color: #0056b3;
    transform: translateY(-3px);
  }

  /* Responsive Adjustments */
  @media (max-width: 768px) {
    .fw-bold {
      font-size: 1.5rem;
    }

    .op-7 {
      font-size: 0.9rem;
    }

    .btn-round {
      font-size: 0.9rem;
      padding: 8px 16px;
    }
  }

  @media (max-width: 576px) {
    .fw-bold {
      font-size: 1.3rem;
    }

    .op-7 {
      font-size: 0.8rem;
    }

    .btn-round {
      font-size: 0.85rem;
      padding: 7px 14px;
    }
  }
    .dashboard-footer {
  background-color: #f8f9fa;
  padding: 10px 20px;
  border-top: 1px solid #e9ecef;
}

.dashboard-footer .container-fluid {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.dashboard-footer .nav {
  list-style: none;
  padding: 0;
  margin: 0;
}

.dashboard-footer .nav-item {
  display: inline-block;
  margin-right: 15px;
}

.dashboard-footer .nav-link {
  color: #343a40;
  text-decoration: none;
}

.dashboard-footer .nav-link:hover {
  text-decoration: underline;
}

.dashboard-footer .copyright {
  font-size: 14px;
  color: #6c757d;
}
.card-round {
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    background-color: #ffffff;
}

.card-body {
    padding: 20px;
}

.h2 {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.text-muted {
    font-size: 0.9rem;
    color: #6c757d;
}

.fa-hand-holding-usd {
    margin-top: 10px;
    margin-bottom: 10px;
}

.mt-2 {
    margin-top: 10px;
}

.pull-in.sparkline-fix {
    padding: 10px 0;
}
/* Badge Styling */
.badge {
    padding: 5px 10px;
    font-size: 12px;
    border-radius: 12px;
}

.bg-success {
    background-color: #28a745 !important;
}

.bg-warning {
    background-color: #ffc107 !important;
}

.bg-danger {
    background-color: #dc3545 !important;
}

/* Button Styling */
.btn-primary {
    background-color: #007bff;
    border-color: #007bff;
    color: #fff;
}

.btn-secondary {
    background-color: #6c757d;
    border-color: #6c757d;
    color: #fff;
}

.btn-sm {
    padding: 5px 10px;
    font-size: 14px;
    border-radius: 4px;
}

.btn i {
    margin-right: 5px;
}

/* Hover Effects */
.btn:hover {
    opacity: 0.8;
}




</style>

{% endblock %}

    <script>
      $("#lineChart").sparkline([102, 109, 120, 99, 110, 105, 115], {
        type: "line",
        height: "70",
        width: "100%",
        lineWidth: "2",
        lineColor: "#177dff",
        fillColor: "rgba(23, 125, 255, 0.14)",
      });

      $("#lineChart2").sparkline([99, 125, 122, 105, 110, 124, 115], {
        type: "line",
        height: "70",
        width: "100%",
        lineWidth: "2",
        lineColor: "#f3545d",
        fillColor: "rgba(243, 84, 93, .14)",
      });

      $("#lineChart3").sparkline([105, 103, 123, 100, 95, 105, 115], {
        type: "line",
        height: "70",
        width: "100%",
        lineWidth: "2",
        lineColor: "#ffa534",
        fillColor: "rgba(255, 165, 52, .14)",
      });


    document.addEventListener('DOMContentLoaded', function() {
        // Get data from the Django context
        var donationsByCampaign = {{ donations_by_campaign|safe }};

        // Extract labels and data for the bar chart
        var campaignTitles = donationsByCampaign.map(function(campaign) {
            return campaign.campaign__title;
        });

        var donationCounts = donationsByCampaign.map(function(campaign) {
            return campaign.total_donations;
        });

        // Create the bar chart
        var ctx = document.getElementById('donationsBarChart').getContext('2d');
        var donationsBarChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: campaignTitles,
                datasets: [{
                    label: 'Number of Donations',
                    data: donationCounts,
                    backgroundColor: '#3498db',
                    borderColor: '#2980b9',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    },
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0  // Show whole numbers on the y-axis
                        }
                    }
                }
            }
        });
    });


    </script>
    </div>
        </div></div></body>
</html>

